var autoComplete=function(){return function(e){if(document.querySelector){var t={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var s=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(s,"<b>$1</b>")+"</div>"},onSelect:function(e,t,s){}};for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);for(var o="object"==typeof t.selector?[t.selector]:document.querySelectorAll(t.selector),n=0;n<o.length;n++){var l=o[n],c=document.createElement("div");c.setAttribute("id","whiteArrowUp"),c.classList.add("white"),c.classList.add("closed"),c.classList.add("arrow-up"),l.sc=document.createElement("div"),l.sc.className="autocomplete-suggestions "+t.menuClass,l.autocompleteAttr=l.getAttribute("autocomplete"),l.setAttribute("autocomplete","off"),l.cache={},l.last_val="",l.updateSC=function(e,t){if(l.getBoundingClientRect(),!e&&(l.sc.style.display="block",document.querySelectorAll(".autocomplete-suggestion").forEach(function(e,t){t>4&&(e.style.display="none")}),l.sc.maxHeight||(l.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(l.sc,null):l.sc.currentStyle).maxHeight)),l.sc.suggestionHeight||(l.sc.suggestionHeight=l.sc.querySelector(".autocomplete-suggestion").offsetHeight),l.sc.suggestionHeight))if(t){var s=l.sc.scrollTop,o=t.getBoundingClientRect().top-l.sc.getBoundingClientRect().top;o+l.sc.suggestionHeight-l.sc.maxHeight>0?l.sc.scrollTop=o+l.sc.suggestionHeight+s-l.sc.maxHeight:o<0&&(l.sc.scrollTop=o+s)}else l.sc.scrollTop=0},u(window,"resize",l.updateSC),document.getElementById("searchContainer").appendChild(c),document.getElementById("searchContainer").appendChild(l.sc),d("autocomplete-suggestion","mouseleave",function(e){var t=l.sc.querySelector(".autocomplete-suggestion.selected");t&&setTimeout(function(){t.className=t.className.replace("selected","")},20)},l.sc),d("autocomplete-suggestion","mouseover",function(e){var t=l.sc.querySelector(".autocomplete-suggestion.selected");t&&(t.className=t.className.replace("selected","")),this.className+=" selected"},l.sc),d("autocomplete-suggestion","mousedown",function(e){if(i(this,"autocomplete-suggestion")){var s=this.getAttribute("data-val");l.value=s,t.onSelect(e,s,this),l.sc.style.display="none"}},l.sc),l.blurHandler=function(){try{var e=document.querySelector(".autocomplete-suggestions:hover")}catch(t){e=0}e?l!==document.activeElement&&setTimeout(function(){l.focus()},20):(l.last_val=l.value,l.sc.style.display="none",setTimeout(function(){l.sc.style.display="none"},350))},u(l,"blur",l.blurHandler);var a=function(e){var s=l.value;if(l.cache[s]=e,0!=e.length?document.getElementById("whiteArrowUp").classList.remove("closed"):document.getElementById("whiteArrowUp").classList.add("closed"),e.length&&s.length>=t.minChars){for(var o="",n=0;n<e.length;n++)o+=t.renderItem(e[n],s);l.sc.innerHTML=o,l.updateSC(0)}else l.sc.style.display="none"};l.keydownHandler=function(e){var s,o=window.event?e.keyCode:e.which;if((40==o||38==o)&&l.sc.innerHTML)return(n=l.sc.querySelector(".autocomplete-suggestion.selected"))?(s=40==o?n.nextSibling:n.previousSibling)?(n.className=n.className.replace("selected",""),s.className+=" selected",l.value=s.getAttribute("data-val")):(n.className=n.className.replace("selected",""),l.value=l.last_val,s=0):((s=40==o?l.sc.querySelector(".autocomplete-suggestion"):l.sc.childNodes[l.sc.childNodes.length-1]).className+=" selected",l.value=s.getAttribute("data-val")),l.updateSC(0,s),!1;if(27==o)l.value=l.last_val,l.sc.style.display="none";else if(13==o||9==o){var n;(n=l.sc.querySelector(".autocomplete-suggestion.selected"))&&"none"!=l.sc.style.display&&(t.onSelect(e,n.getAttribute("data-val"),n),setTimeout(function(){l.sc.style.display="none"},20))}},u(l,"keydown",l.keydownHandler),l.keyupHandler=function(e){var s=window.event?e.keyCode:e.which;if(!s||(s<35||s>40)&&13!=s&&27!=s){var o=l.value;if(o.length>=t.minChars){if(o!=l.last_val){if(l.last_val=o,clearTimeout(l.timer),t.cache){if(o in l.cache)return void a(l.cache[o]);for(var n=1;n<o.length-t.minChars;n++){var c=o.slice(0,o.length-n);if(c in l.cache&&!l.cache[c].length)return void a([])}}l.timer=setTimeout(function(){t.source(o,a)},t.delay)}}else l.last_val=o,l.sc.style.display="none"}},u(l,"keyup",l.keyupHandler),l.focusHandler=function(e){l.last_val="\n",l.keyupHandler(e)},t.minChars||u(l,"focus",l.focusHandler)}this.destroy=function(){for(var e=0;e<o.length;e++){var t=o[e];r(window,"resize",t.updateSC),r(t,"blur",t.blurHandler),r(t,"focus",t.focusHandler),r(t,"keydown",t.keydownHandler),r(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.body.removeChild(t.sc),t=null}}}function i(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function u(e,t,s){e.attachEvent?e.attachEvent("on"+t,s):e.addEventListener(t,s)}function r(e,t,s){e.detachEvent?e.detachEvent("on"+t,s):e.removeEventListener(t,s)}function d(e,t,s,o){u(o||document,t,function(t){for(var o,n=t.target||t.srcElement;n&&!(o=i(n,e));)n=n.parentElement;o&&s.call(n,t)})}}}();"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete;